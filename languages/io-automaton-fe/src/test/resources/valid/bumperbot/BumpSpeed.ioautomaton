package valid.bumperbot;

import valid.bumperbot.SpeedCmd;

automaton BumpSpeed {
	input SpeedCmd cmd;
	input Integer distance;
	input Integer defaultSpeed;
	output Integer speed;
	output String log;
	
	state Static, Dynamic;
	
	initial Dynamic;
	
	Dynamic -> Static {cmd == SpeedCmd.Static} / {speed = defaultSpeed, log = "Static Speed"};
	Static -> Dynamic {cmd == SpeedCmd.Dynamic} / {speed = defaultSpeed>=(int)((float)distance/255.0f)?defaultSpeed:(int)((float)distance/255.0f), log = "Dynamic Speed"};
	Dynamic -> Dynamic / {(Integer)(defaultSpeed>=(int)((float)distance/255.0f)?defaultSpeed:(int)((float)distance/255.0f))};	
}