/* (c) https://github.com/MontiCore/monticore */

plugins {
  id 'monticore' version "$mc_version" apply false
}

group = "montiarc"

allprojects {
  version = "$version"
  buildDir = "$projectDir/target"
}

description = """MontiArc Version $version

Framework for Modeling and Simulation of Software Architectures

Developed at the Department of Software Engineering, RWTH Aachen University
http://www.se-rwth.de/"""

subprojects {
  apply plugin: 'java'
  apply plugin: 'maven-publish'

  sourceCompatibility = '1.8'

  tasks.withType(JavaCompile) {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
    options.encoding = 'UTF-8'
    options.fork = false
    options.deprecation = false
    options.warnings = false
    options.headerOutputDirectory.convention(null)
  }

  repositories {
    maven {
      credentials.username(mavenUser)
      credentials.password(mavenPassword)
      url repo
    }
    mavenCentral()
  }
}

task buildAll(type: Task) {
  group("build")
	description("Assembles and tests all subprojects.")
	dependsOn(":util:build")
	dependsOn(":languages:arc-fe:build")
	dependsOn(":languages:behavior-fe:build")
	dependsOn(":languages:montiarc-fe:build")
	dependsOn(":libraries:lejos-rte:build")
	dependsOn(":libraries:maJavaLib:build")
	dependsOn(":libraries:majava-rte:build")
	dependsOn(":generators:cd2pojo:build")
	dependsOn(":generators:ma2java:build")
	dependsOn(":applications:bumperbot:build")
	dependsOn(":applications:factory:build")
	dependsOn(":applications:factoryTask:build")
}

task cleanAll(type: Delete) {
  group("clean")
	description("Deletes the build directory in all subprojects.")
	dependsOn(":util:clean")
	dependsOn(":languages:arc-fe:clean")
	dependsOn(":languages:behavior-fe:clean")
	dependsOn(":languages:montiarc-fe:clean")
	dependsOn(":libraries:lejos-rte:clean")
	dependsOn(":libraries:maJavaLib:clean")
	dependsOn(":libraries:majava-rte:clean")
	dependsOn(":generators:cd2pojo:clean")
	dependsOn(":generators:ma2java:clean")
	dependsOn(":applications:bumperbot:clean")
	dependsOn(":applications:factory:clean")
	dependsOn(":applications:factoryTask:clean")
}